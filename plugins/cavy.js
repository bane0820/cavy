/*
 Copyright 2013 TriFort.inc
 cavy.js(http://trifort.jp/library/cavy)
 version 0.0.2
 MIT License

 Matrix2D
 Visit http://createjs.com/ for documentation, updates and examples.
 Copyright (c) 2010 gskinner.com, inc.
*/
'use strict';(function(d){d.cavy=d.cavy||{};d.requestAnimationFrame=function(c){return c.requestAnimationFrame||c.webkitRequestAnimationFrame||function(){var b=Date.now();return function(a){var e=Date.now(),f=Math.max(0,16-(e-b));b=e+f;return c.setTimeout(a,f)}}(c)}(d);d.cancelAnimationFrame=d.webkitCancelAnimationFrame||d.webkitCancelRequestAnimationFrame||d.clearTimeout;cavy.retina=!1;cavy.pixelSnap=!1;cavy.autoRetina=!1;cavy.strict=!0;cavy.frameRate=60;cavy.maxSkip=60;cavy.deviceRatio=1;cavy.userAgent=
navigator.userAgent;cavy.bugs={background:["F-06E","L-05E","SC-04E"]};cavy.outOfRendering=!0;cavy.backgroundColor="rgba(255,255,255,0.01)";cavy.isBuggyDevice=function(c){c=cavy.bugs[c];if(!c)return!1;for(var b=c.length;b--;)if(-1!==cavy.userAgent.search(c[b]))return!0;return!1};cavy.isRetina=function(){return 1!==d.devicePixelRatio?!0:!1};cavy.expand=function(){for(var c in this)d[c]=this[c]}})(window);(function(d){d.cavy=d.cavy||{};d=function(){this.__store__=[]};d.prototype={constructor:d,addEventListener:function(c,b){return this.on(c,b)},on:function(c,b){var a=this.__store__[c]||[];a.push(b);this.__store__[c]=a;return this},removeEventListener:function(c,b){return this.off(c,b)},off:function(c,b){if(c)if("function"===typeof b){var a=this.__store__[c];if(a){var e=a.indexOf(b);-1!==e&&(a.splice(e,1),this.__store__[c]=a)}}else delete this.__store__[c];else this.__store__=[];return this},hasEvent:function(c){return this.__store__[c]?
!0:!1},dispatchEvent:function(c,b,a){return this.trigger(c,b,a)},trigger:function(c,b,a){var e=this.__store__[c]||null;if(e){a=a||this;for(var f=Array.prototype.slice.apply(arguments,[1]),e=e.slice(),d=0,g=e.length;d<g;d++)e[d].apply(a,f)}return this}};cavy.EventDispatcher=d})(window);(function(d){d.cavy=d.cavy||{};var c=function(b,a,c){cavy.EventDispatcher.apply(this);this.data=b;this.keys=[];this.result=[];this.leaveCount=this.length=this.loadedCount=this.index=0;"function"===typeof a?this.callback=a:"function"===typeof c&&(this.callback=c);this.maxConnection="number"===typeof a?c:"number"===typeof c?c:5;var f=this;this.loadedHandler=function(a){f.loaded(a.target)};this.errorHandler=function(a){f._error(a)};d.setTimeout(function(){f.init()},0)};c.prototype=Object.create(cavy.EventDispatcher.prototype);
c.prototype.constructor=c;c.prototype.init=function(){var b=this.maxConnection;this.keys=Object.keys(this.data);this.length=this.keys.length;b>this.length&&(b=this.length);this.leaveCount=this.length-b;this.index=b;for(var a=0;a<b;a++)this.load(a)};c.prototype.loaded=function(b){++this.loadedCount;this.dispatchEvent("step",b);b.removeEventListener("load",this.loadedHandler);b.removeEventListener("error",this.errorHandler);this.result[b.id]=b;this.loadedCount===this.length?(this.dispatchEvent("complete",
this.result),"function"===typeof this.callback&&this.callback(this.result)):0!==this.leaveCount&&(this.leaveCount--,this.load(this.index++))};c.prototype.load=function(b){var a=new Image;a.id=this.keys[b];a.addEventListener("load",this.loadedHandler);a.addEventListener("error",this.errorHandler);a.src=this.data[this.keys[b]];a.complete&&this.loaded(a)};c.prototype._error=function(b){this.trigger("error",b);return this};c.prototype.get=function(b){return this.result[b]};c.prototype.error=function(b){var a=
function(){this.removeEventListener("error",a);b.apply(this,[arguments])};this.addEventListener("error",a);return this};c.prototype.complete=function(b){var a=function(){this.removeEventListener("complete",a);b.apply(this,[arguments])};this.addEventListener("complete",a);return this};c.prototype.destroy=function(){delete this.result;delete this.data;this.result=[]};cavy.Preload=c})(window);(function(d){d.cavy=d.cavy||{};var c=function(b,a,c,f,d,g,k){this.a=1;this.c=this.b=0;this.d=1;this.f=this.e=0;this.opacity=1;this.initialize(b,a,c,f,d,g,k)};c.identity=null;c.DEG_TO_RAD=Math.PI/180;c.prototype={constructor:c,a:1,b:0,c:0,d:1,e:0,f:0,opacity:1,initialize:function(b,a,c,f,d,g,k){null!=b&&(this.a=b);this.b=a||0;this.c=c||0;null!=f&&(this.d=f);this.e=d||0;this.f=g||0;this.opacity=isNaN(k)?1:k;return this},prepend:function(b,a,c,f,d,g){var k=this.e;if(1!==b||0!==a||0!==c||1!==f){var m=
this.a,n=this.c;this.a=m*b+this.b*c;this.b=m*a+this.b*f;this.c=n*b+this.d*c;this.d=n*a+this.d*f}this.e=k*b+this.f*c+d;this.f=k*a+this.f*f+g;return this},append:function(b,a,c,f,d,g){var k=this.a,m=this.b,n=this.c,l=this.d;this.a=b*k+a*n;this.b=b*m+a*l;this.c=c*k+f*n;this.d=c*m+f*l;this.e=d*k+g*n+this.e;this.f=d*m+g*l+this.f;return this},prependMatrix:function(b){this.prepend(b.a,b.b,b.c,b.d,b.e,b.f);return this},appendMatrix:function(b){this.append(b.a,b.b,b.c,b.d,b.e,b.f);return this},prependTransform:function(b,
a,e,f,d,g,k,m,n){var l=1,p=0;d%360&&(d*=c.DEG_TO_RAD,l=Math.cos(d),p=Math.sin(d));if(m||n)this.e-=m,this.f-=n;g||k?(g*=c.DEG_TO_RAD,k*=c.DEG_TO_RAD,this.prepend(l*e,p*e,-p*f,l*f,0,0),this.prepend(Math.cos(k),Math.sin(k),-Math.sin(g),Math.cos(g),b,a)):this.prepend(l*e,p*e,-p*f,l*f,b,a);return this},appendTransform:function(b,a,e,f,d,g,k,m,n){var l=1,p=0;d%360&&(d*=c.DEG_TO_RAD,l=Math.cos(d),p=Math.sin(d));g||k?(g*=c.DEG_TO_RAD,k*=c.DEG_TO_RAD,this.append(Math.cos(k),Math.sin(k),-Math.sin(g),Math.cos(g),
b,a),this.append(l*e,p*e,-p*f,l*f,0,0)):this.append(l*e,p*e,-p*f,l*f,b,a);if(m||n)this.e-=m*this.a+n*this.c,this.f-=m*this.b+n*this.d;return this},rotate:function(b){b*=c.DEG_TO_RAD;var a=Math.cos(b);b=Math.sin(b);var e=this.a,d=this.c,h=this.e;this.a=e*a-this.b*b;this.b=e*b+this.b*a;this.c=d*a-this.d*b;this.d=d*b+this.d*a;this.e=h*a-this.f*b;this.f=h*b+this.f*a;return this},skew:function(b,a){b*=c.DEG_TO_RAD;a*=c.DEG_TO_RAD;this.append(Math.cos(a),Math.sin(a),-Math.sin(b),Math.cos(b),0,0);return this},
scale:function(b,a){this.a*=b;this.d*=a;this.c*=b;this.b*=a;this.e*=b;this.f*=a;return this},translate:function(b,a){this.e+=b;this.f+=a;return this},identity:function(){this.a=this.d=this.opacity=1;this.b=this.c=this.e=this.f=0;return this},invert:function(){var b=this.a,a=this.b,c=this.c,d=this.d,h=this.e,g=b*d-a*c;this.a=d/g;this.b=-a/g;this.c=-c/g;this.d=b/g;this.e=(c*this.f-d*h)/g;this.f=-(b*this.f-a*h)/g;return this},isIdentity:function(){return 0===this.e&&0===this.f&&1===this.a&&0===this.b&&
0===this.c&&1===this.d},decompose:function(b){null==b&&(b={});b.x=this.e;b.y=this.f;b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var a=Math.atan2(-this.c,this.d),e=Math.atan2(this.b,this.a);a==e?(b.rotation=e/c.DEG_TO_RAD,0>this.a&&0<=this.d&&(b.rotation+=0>=b.rotation?180:-180),b.skewX=b.skewY=0):(b.skewX=a/c.DEG_TO_RAD,b.skewY=e/c.DEG_TO_RAD);return b},clone:function(){return new c(this.a,this.b,this.c,this.d,this.e,this.f,this.opacity)},toString:function(){return"matrix("+
this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"},toString3D:function(){return"matrix3d("+this.a+","+this.b+",0,0,"+this.c+","+this.d+",0,0,0,0,1,0,"+this.e+","+this.f+",0,1)"}};c.identity=new c(1,0,0,1,0,0);cavy.Matrix2D=c})(window);(function(d){d.cavy=d.cavy||{};var c=function(){this.isTick=!1;this.repeats=[];this.time=0;var a=this;this._loopHandler=function(){a.update()}};c.prototype={constructor:c,update:function(){for(var a=Date.now(),b=this.repeats.length,c=null,h=this.repeats.slice(0);b--;)(c=h[b])&&a-c.time>=c.delay&&(isNaN(c.count)||(--c.count,0===c.count&&this.repeats.splice(b,1),c.cacheCount-=c.count),c.callback(a-c.time,c.count),c.time=a);this.time=a;this.timer=d.requestAnimationFrame(this._loopHandler)},repeat:function(a,
c,d){a=new b(this.time,a,c,d);this.repeats.push(a);this.play();return a},delay:function(a,c){var d=new b(this.time,a,Math.floor(c),1);this.repeats.push(d);this.play();return d},play:function(){this.isTick||(this.isTick=!0,this.timer=d.requestAnimationFrame(this._loopHandler))},stop:function(a){a=this.repeats.indexOf(a);-1!==a&&this.repeats.splice(a,1);0===this.repeats.length&&(d.cancelAnimationFrame(this.timer),this.isTick=!1)}};cavy.Timer=new c;var b=function(a,b,c,d){this.time=a||0;this.callback=
b||function(){};this.delay=c||0;this.count=d||NaN;this.cacheCount=d||0};b.prototype={stop:function(){cavy.Timer.stop(this)}};cavy.TimerObject=b})(window);(function(d){d.cavy=d.cavy||{};var c=function(b){this.queue=b?Array(b):[];this.labels={};this.frame=0;this.timer=null;this.passedTime=this.time=0;var a=this;this._enterframeHandler=function(b){a._tick();a.frame++};cavy.EventDispatcher.apply(this)};c.prototype=Object.create(cavy.EventDispatcher.prototype);c.prototype.constructor=c;c.prototype.SECOND=1E3;c.prototype.add=function(b,a){if("string"===typeof b){var c=this.labels[b];if(isNaN(c)){d.console.error("Not found label ["+b+"]");return}b=c}b=Math.round(b/
(this.SECOND/cavy.frameRate));"object"===typeof this.queue[b]?this.queue[b].push(a):this.queue[b]=[a];return this};c.prototype.addLabel=function(b,a,c){this.labels[a]=b;c&&this.add(b,c)};c.prototype.removeLabel=function(b){delete this.labels[b]};c.prototype.remove=function(b,a){var c=this.queue[b];if(c){var d=c.indexOf(a);-1!==d&&c.splice(d,1)}return this};c.prototype.play=function(){this.stop();this.time=Date.now();this.timer=cavy.Timer.repeat(this._enterframeHandler);return this};c.prototype.stop=
function(){cavy.Timer.stop(this.timer);return this};c.prototype.goToAndPlay=function(b){if("string"===typeof b){var a=this.labels[b];if(isNaN(a)){d.console.error("Not found label ["+b+"]");return}b=a}this.frame=Math.round(b/(this.SECOND/cavy.frameRate));this.passedTime=Math.floor(this.frame*(this.SECOND/cavy.frameRate));this._tick();this.play()};c.prototype.goToAndStop=function(b){if("string"===typeof b){var a=this.labels[b];if(isNaN(a)){d.console.error("Not found label ["+b+"]");return}b=a}this.frame=
Math.round(b/(c.SECOND/cavy.Tween.frameRate));this.passedTime=Math.floor(this.frame*(this.SECOND/cavy.frameRate));this._tick();this.stop()};c.prototype.reset=function(){this.frame=0;return this};c.prototype._tick=function(){var b=Date.now();this.passedTime+=b-this.time;this.time=b;b=Math.floor(this.passedTime/(1E3/cavy.frameRate));b-this.frame>cavy.maxSkip&&(b=this.frame+cavy.maxSkip);var a=[this.frame,b];this.frame=b;for(var c=a[0];c<=a[1]&&this.frame===b;c++){var d=this.queue[c];if(d&&0!==d.length)for(var h=
d.length;h--;)d[h].apply(this,[this.frame])}this.frame>this.queue.length&&(this.stop(),this.dispatchEvent("complete"))};cavy.Timeline=c})(window);(function(d){d.cavy=d.cavy||{};var c=function(){var a=this.create;a.create=this.create;a.remove=this.remove;return a};c.prototype={constructor:c,create:function(a,c){return new b(a,c||!1)},remove:function(a){a.destroy()}};c.duration=1E3;c.easing="easeOutQuad";c.Easing={linear:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,
b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+
b},easeInOutQuint:function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==
d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return 1>(a/=d/2)?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,h=c;if(0==a)return b;if(1==(a/=d))return b+c;f||(f=0.3*d);h<Math.abs(c)?(h=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/h);return-(h*Math.pow(2,
10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,h=c;if(0==a)return b;if(1==(a/=d))return b+c;f||(f=0.3*d);h<Math.abs(c)?(h=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/h);return h*Math.pow(2,-10*a)*Math.sin((a*d-e)*2*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,h=c;if(0==a)return b;if(2==(a/=d/2))return b+c;f||(f=d*0.3*1.5);h<Math.abs(c)?(h=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/h);return 1>a?-0.5*h*Math.pow(2,10*(a-=1))*Math.sin((a*d-
e)*2*Math.PI/f)+b:0.5*h*Math.pow(2,-10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f)+c+b},easeInBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);return c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){void 0==e&&(e=1.70158);return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,d,e){return d-c.Easing.easeOutBounce(e-a,0,d,e)+b},easeOutBounce:function(a,
b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(a,b,d,e){return a<e/2?0.5*c.Easing.easeInBounce(2*a,0,d,e)+b:0.5*c.Easing.easeOutBounce(2*a-e,0,d,e)+0.5*d+b}};var b=function(a,b){cavy.EventDispatcher.apply(this);this.sprite=a;this.autoRelease=b;this.__attach__=[];this.index=0;this.isReset=this.reverse=this.isRepeat=this.isPlaying=!1;this.time=0;this.stepCallback=
null;var c=this;this._loopHandler=function(){c.update()}};b.prototype=Object.create(cavy.EventDispatcher.prototype);b.prototype.constructor=b;b.prototype.to=function(b){var c=Array.prototype.slice.apply(arguments);b=c.shift();c=new a(b,c);this.__attach__.push(c);this.isPlaying||(c.initialize(this.sprite),this.play());return this};b.prototype.set=function(a){a=new e(a);this.__attach__.push(a);this.isPlaying||(a.initialize(this.sprite),this.play());return this};b.prototype.wait=function(a){a=new h(a);
this.__attach__.push(a);this.isPlaying||(a.initialize(),this.play());return this};b.prototype.call=function(a){a=new f(a);this.__attach__.push(a);this.isPlaying||(a.initialize(),this.play());return this};b.prototype.complete=function(a){var b=function(){this.removeEventListener("complete",b);a.apply(this,[arguments])};this.addEventListener("complete",b);return this};b.prototype.repeat=function(a,b){this.isRepeat=!0;if("number"===typeof a)return this.isReset=!1,this.limit=2*a,this;this.isReset=a||
!1;"number"===typeof b&&(this.limit=b,this.isReset||(this.limit*=2));return this};b.prototype._doAttach=function(){this.reverse?--this.index:++this.index;this.__attach__[this.index].initialize(this.sprite,this.reverse,this.isReset);this.time=Date.now()};b.prototype._hasAttach=function(){var a=this.__attach__.length;if(0===a)return!1;if(this.reverse){if(0!==this.index)return!0}else if(this.index!==a-1)return!0;return!1};b.prototype.play=function(){this.isPlaying||(this.time=Date.now(),this.isPlaying=
!0,this.timer=cavy.Timer.repeat(this._loopHandler));return this};b.prototype.stop=function(){this.isPlaying=!1;this.timer&&this.timer.stop();return this};b.prototype.reset=function(){this.stop();this.index=0;this.isRepeat=this.isReset=!1;this.__attach__=[];return this};b.prototype.update=function(){if(this.sprite&&this.sprite.parent){var a=this.__attach__[this.index];if(cavy.strict){var b=(Date.now()-this.time)/a.time*a.frame;b-a.count>cavy.maxSkip&&(b=a.count+cavy.maxSkip);a.count=Math.min(~~b,a.frame)}b=
c.Easing[a.easing];if(a.count===a.frame){for(var d in a.end)this.sprite[d]=a.end[d];if(this._hasAttach())this._doAttach();else if(this.isRepeat){if(!isNaN(this.limit)&&(--this.limit,0>=this.limit)){this.stop();this.dispatchEvent("complete",this,this.sprite);this.limit=null;return}this.isReset?this.index=-1:this.reverse?(this.reverse=!1,this.index=-1):(this.reverse=!0,this.index=this.__attach__.length);this._doAttach()}else{this.stop();this.dispatchEvent("complete",this,this.sprite);this.autoRelease&&
this.destroy();return}}else if("tween"===a.QUEUE_TYPE){for(d in a.end){var e=a.start[d];this.sprite[d]=b(a.count,e,a.end[d]-e,a.frame-1)}cavy.strict&&a.count++}else"wait"===a.QUEUE_TYPE&&cavy.strict&&a.count++;this.stepCallback&&this.stepCallback.apply(this)}else this.stop()};b.prototype.destroy=function(){this.stop();this.stepCallback=null;this.removeEventListener();this.__attach__=[];this.sprite=null};b.prototype.step=function(a){this.stepCallback=a;return this};var a=function(a,b){this.setting=
{duration:c.duration,easing:c.easing};this.start=null;this.end=a;if(b)for(var d=b.length;d--;){var e=b[d];if("object"===typeof e)for(var f in e)this.setting[f]=e[f];else"string"===typeof e?this.setting.easing=e:"number"===typeof e&&(this.setting.duration=e)}this.SECOND=1E3;this.time=this.setting.duration;this.easing=this.setting.easing;this.count=0;this.frame=Math.round(this.time/(this.SECOND/cavy.frameRate))};a.prototype={constructor:a,QUEUE_TYPE:"tween",initialize:function(a,b,c){this.count=0;b?
(a=this.start,this.start=this.end,this.end=a):this.start&&!c?(a=this.start,this.start=this.end,this.end=a):(this.start=this.extend(this.end,a),this.checkRelative(this.end))},checkRelative:function(a){for(var b in a){var c=a[b];"string"===typeof c&&-1!==c.search(/\+=|-=/)&&(c=parseFloat(c.replace(/=/,"")),a[b]=c+this.start[b])}},extend:function(a,b){var c={},d;for(d in a)c[d]=b[d];return c}};var e=function(a){this.param=a;this.count=this.frame=0};e.prototype={constructor:e,QUEUE_TYPE:"param",initialize:function(a,
b){this.count=this.frame=0;for(var c in this.param)a[c]=this.param[c]}};var f=function(a){this.callback=a;this.count=this.frame=0};f.prototype={constructor:f,QUEUE_TYPE:"call",initialize:function(a,b){this.count=this.frame=0;this.callback.apply(a)}};var h=function(a){this.time=a;this.count=0;this.SECOND=1E3};h.prototype={constructor:h,QUEUE_TYPE:"wait",initialize:function(){this.count=0;this.frame=Math.round(this.time/(this.SECOND/cavy.frameRate))}};cavy.Tween=new c;cavy.TweenObject=b})(window);(function(d){d.cavy=d.cavy||{};var c=function(b){this.scenes=[];this.scenesData={};this.index=-1;var a=this;this.addHandler=function(b,c){a.add(b,c)};this.removeHandler=function(b){a.remove(param)};this.goHandler=function(b,c){a.go(b,c)};this.selectHandler=function(b,c){a.select(b,c)};this.nextHandler=function(b){a.next(b)};this.prevHandler=function(b){a.prev(b)};this.destroyHandler=function(){a.destroy()};this._initialize(b);return{add:this.addHandler,remove:this.removeHandler,go:this.goHandler,
select:this.selectHandler,next:this.nextHandler,prev:this.prevHandler,destroy:this.destroyHandler}};c.prototype={constructor:c,_initialize:function(b){if(b)for(var a in b)this.add(a,b[a])},add:function(b,a){this.scenes.push(b);this.scenesData[b]=a},remove:function(b){delete this.scenes[b]},go:function(b,a){if("string"===typeof b){var c=this.scenesData[b];c?(this.index=this.scenes.indexOf(b),c(a,this.index)):d.error("Not found: Scene ["+b+"]")}else this.select(b,a)},select:function(b,a){var c=this.scenes[b];
c&&(this.index=b,this.scenesData[c](a,b))},next:function(b){var a=this.index+1,c=this.scenes[a];c&&(this.index=a,this.scenesData[c](b,a))},prev:function(b){var a=this.index-1,c=this.scenes[a];c&&(this.index=a,this.scenesData[c](b,a))},destroy:function(){this.scenes=[];this.scenesData={};this.index=-1}};cavy.Scene=c})(window);(function(d){d.cavy=d.cavy||{};var c=function(a,c){cavy.EventDispatcher.apply(this);this.source=a;if("string"===typeof this.source){var d=new Image;d.src=this.source;this.source=d}this.parent=null;this.width=this.source?this.source.width:0;this.height=this.source?this.source.height:0;this.fitImage=!1;this.fitType="normal";this.positionY=this.positionX=this.offsetY=this.offsetX=this.y=this.x=0;this.scaleY=this.scaleX=1;this.originY=this.originX=0;this.opacity=1;this.skewY=this.skewX=this.rotation=
0;this.visible=!0;this.filter=null;this.children=[];this.matrix=new cavy.Matrix2D;this.mask=null;this.interactive=!0;this.imageCache=this.cache=null;this._visible=!0;this._pool={};this._param=new b;c&&"object"===typeof c&&this.set(c)};c.prototype=Object.create(cavy.EventDispatcher.prototype);c.prototype.constructor=c;c.prototype.set=function(a){for(var b in a)this[b]=a[b];return this};c.prototype.addTo=function(a){a.addChild(this);return this};c.prototype.removeFrom=function(a){a.removeChild(this);
return this};c.prototype.addChild=function(a){a.parent=this;this.children.push(a);return this};c.prototype.addChildAt=function(a,b){a.parent&&a.parent.removeChild(a);if(b>this.children.length)return d.console.error("INDEX_ERROR"),this;a.parent=this;this.children.splice(b,0,a);return this};c.prototype.replaceChild=function(a,b){a.parent&&a.parent.removeChild(a);if(b>this.children.length)return d.console.error("INDEX_ERROR"),this;a.parent=this;this.children[b]=a;return this};c.prototype.swapChild=function(a,
b){var c=this.children.indexOf(a),d=this.children.indexOf(b);this.swapChildAt(c,d);return this};c.prototype.swapChildAt=function(a,b){if(-1!==a&&-1!==b){var c=this.children[a];this.children[a]=b;this.children[b]=c}return this};c.prototype.setIndex=function(a){if(!this.parent)return this;this.parent.setChildIndex(this,a);return this};c.prototype.setChildIndex=function(a,b){if(b>this.children.length)return d.console.error("INDEX_ERROR"),this;var c=this.children.indexOf(a);-1!==c&&(this.children.splice(c,
1),this.children.splice(b,0,a));return this};c.prototype.removeChild=function(a){var b=this.children.indexOf(a);-1!==b&&this.children.splice(b,1);a.parent=null;return this};c.prototype.removeChildAt=function(a){this.children.splice(a,1);return this};c.prototype.removeAllChildren=function(){for(var a=this.children.length;a--;)this.removeChild(this.children[a]);this.children=[];return this};c.prototype.adjustSource=function(a){"width"===a?this.height=this.source.height*this.width/this.source.width:
this.width=this.source.width*this.height/this.source.height};c.prototype.update=function(){this._param.initialize(this);this.fitImage&&this.source&&(this._param.fitSource(this.source,this.fitType),"contain"===this.fitType&&(this.width=this._param.width,this.height=this._param.height));return this._param};c.prototype.getStage=function(){return this instanceof cavy.Stage?this:this.parent?this.parent.getStage():null};c.prototype.clone=function(){var a=new this.constructor;return a=function f(a,b){if(!a)return b;
for(var c=Object.getOwnPropertyNames(b),d=0,n=c.length;d<n;d++){var l=c[d];b.hasOwnProperty(l)&&(b[l]&&"object"===typeof b[l]?a[l]=f(a[l],b[l]):Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(b,l)))}return a}(a,this)};c.prototype.getBoundingRect=function(){this.update();var a=this.getBounds();return this.convertBoundaryRect(a)};c.prototype.getBounds=function(){var a=this.width,b=this.height,c=this.matrix,d={top:c.e,left:c.f,right:c.e+a,bottom:c.f+b,width:a,height:b};if(!this.parent)return d;
var d=(new cavy.Matrix2D).translate(a,0).prependMatrix(c),g=(new cavy.Matrix2D).translate(0,b).prependMatrix(c),a=(new cavy.Matrix2D).translate(a,b).prependMatrix(c);return[[c.e,c.f],[d.e,d.f],[g.e,g.f],[a.e,a.f]]};c.prototype.convertBoundaryRect=function(a){for(var b=a[0][0],c=a[0][0],d=a[0][1],g=a[0][1],k=a.length;k--;)b=Math.min(b,a[k][0]),c=Math.max(c,a[k][0]),d=Math.min(d,a[k][1]),g=Math.max(g,a[k][1]);return{left:b,right:c,top:d,bottom:g,width:c-b,height:g-d}};c.prototype.createCache=function(){var a=
this.cache||document.createElement("canvas"),b=a.getContext("2d");this.clearCanvas(b,a.width,a.height);a.width=this.width*cavy.deviceRatio;a.height=this.height*cavy.deviceRatio;0===a.width&&0===a.height?this.cache=null:(this._drawCache([this],b),this.cache=a)};c.prototype.clearCanvas=function(a,b,c){b=b+255>>8;for(c=c+255>>8;b--;)for(var d=0;d<c;d++)a.clearRect(b<<8,d<<8,256,256)};c.prototype._drawCache=function(a,b){if(a)for(var c=a.slice(),d=0,g=c.length;d<g;d++){var k=c[d];if(k.visible){var m=
this.getBoundingRect();b.setTransform(cavy.deviceRatio,0,0,cavy.deviceRatio,-m.left*cavy.deviceRatio,-m.top*cavy.deviceRatio);k.draw(b);0===k.children.length||k.cache||this._drawCache(k.children,b)}}};c.prototype.deleteCache=function(){this.imageCache=null;if(this.cache){var a=this.cache.getContext("2d");this.clearCanvas(a,this.cache.width,this.cache.height)}this.cache=null};c.prototype.updateContext=function(a){if(this.parent){var b=this.matrix,c=this.mask||this.parent.mask;c&&(c.draw(a,!0),a.clip());
this.filter&&(a.globalCompositeOperation=this.filter);a.globalAlpha=b.opacity;a.transform(b.a,b.b,b.c,b.d,b.e,b.f)}};c.prototype.data=function(a,b){if("undefined"===typeof a)return this._pool;if("string"===typeof a){if("undefined"===typeof b)return this._pool[a];this._pool[a]=b}else for(var c in a)this._pool[c]=a[c]};c.prototype.clearData=function(a){a?delete this._pool[a]:this._pool={}};var b=function(){this.innerHeight=this.innerWidth=this.sy=this.sx=this.height=this.width=this.y=this.x=0;this.visible=
!1;this.opacity=1};b.prototype={initialize:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;this.innerWidth=a.width;this.innerHeight=a.height;this.visible=a.visible;this.sx=a.offsetX*this.width+a.positionX;this.sy=a.offsetY*this.width+a.positionY;this.matrix=a.matrix;cavy.pixelSnap&&this.pixelSnap();this.setMatrix(a)},pixelSnap:function(){this.x=0.5+this.x|0;this.y=0.5+this.y|0;this.sx=0.5+this.sx|0;this.sy=0.5+this.sy|0},fitSource:function(a,b){this.innerWidth=a.width;this.innerHeight=
a.height;switch(b){case "height":this.width=this.innerWidth*(this.height/this.innerHeight);break;case "width":this.height=this.innerHeight*(this.width/this.innerWidth);break;case "cover":case "contain":var c=this.getResizeData(this.innerWidth,this.innerHeight,"cover"===b);this.width=c.width;this.height=c.height}},setMatrix:function(a){this.matrix.identity();var b=a.opacity;a.parent&&(this.matrix.appendMatrix(a.parent.matrix),b*=a.parent.opacity);this.matrix.appendTransform(this.x,this.y,a.scaleX,
a.scaleY,a.rotation,a.skewX,a.skewY,this.width*a.originX,this.height*a.originY);this.matrix.opacity=b},getResizeData:function(a,b,c){var d=this.width,g=this.height,k={width:a,height:b};a=d/a;b=g/b;c?a>b?(k.width=d,k.height*=a):(k.height=g,k.width*=b):a<b?(k.width=d,k.height*=a):(k.height=g,k.width*=b);return k}};cavy.DisplayObject=c})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b){cavy.DisplayObject.apply(this,[c,b])};d.prototype=Object.create(cavy.DisplayObject.prototype);d.prototype.constructor=d;d.prototype.hitTest=function(c,b){var a=this.mask?this.mask.getBoundingRect():this.getBoundingRect();return c>=a.left&&c<=a.right&&b>=a.top&&b<=a.bottom?!0:!1};d.prototype.hitTestObject=function(c){var b=this.getBoundingRect(),a=c.getBoundingRect();this.mask&&!detail&&(b=this.mask.getBoundingRect());c.mask&&!detail&&(a=this.mask.getBoundingRect());
return b.left<=a.right&&b.left<=a.top&&b.right>=a.left&&b.bottom>=a.bottom};cavy.InteractiveObject=d})(window);(function(d){d.cavy=d.cavy||{};var c=function(b,a,c,d,h){this.container=b;"string"===typeof this.container&&(this.container=document.getElementById(this.container));if(null!==this.container){this.canvas=this.container instanceof HTMLCanvasElement?this.container:null;this.tick=this.rendering=this.context=null;this.interactive=d?!0:!1;this.strictEvent=h?!0:!1;this._firstRender=!0;this._delayTimer=null;var g=this;this._loopHandler=function(a){g.update(a)};this._triggerHandler=function(a){g._triggerEvent(a)};
this._refreshHandler=function(a){g._refresh()};this._renderBugHandler=function(a){g.update()};this._initialize(a,c)}};c.prototype=Object.create(cavy.InteractiveObject.prototype);c.prototype.constructor=c;c.prototype._initialize=function(b,a){cavy.autoRetina?1!==d.devicePixelRatio?(cavy.retina=!0,cavy.deviceRatio=d.devicePixelRatio):cavy.retina=!1:cavy.retina&&(cavy.deviceRatio=2);this.width=b||320;this.height=a||240;cavy.retina&&(this.width*=cavy.deviceRatio,this.height*=cavy.deviceRatio);var c=!0;
this.canvas?this.container=this.canvas.parentNode:(this.canvas=document.createElement("canvas"),c=!1);this.container.style.overflow="hidden";this.container.style.webkitTapHighlightColor="rgba(0,0,0,0)";this.container.style.tapHighlightColor="rgba(0,0,0,0)";var f=this.canvas.style;!f.backgroundColor&&cavy.isBuggyDevice("background")&&(f.backgroundColor=cavy.backgroundColor);this.canvas.width=this.width;this.canvas.height=this.height;this.context=this.canvas.getContext("2d");cavy.retina&&(f.width=this.width/
cavy.deviceRatio+"px",f.height=this.height/cavy.deviceRatio+"px",this.context.scale(cavy.deviceRatio,cavy.deviceRatio));this.interactive&&(this.canvas.addEventListener("touchstart",this._triggerHandler),this.canvas.addEventListener("touchmove",this._triggerHandler),this.canvas.addEventListener("touchend",this._triggerHandler),this.canvas.addEventListener("gesturestart",this._triggerHandler),this.canvas.addEventListener("gesturechange",this._triggerHandler),this.canvas.addEventListener("gestureend",
this._triggerHandler),this.canvas.addEventListener("click",this._triggerHandler),d.addEventListener("scroll",this._refreshHandler),d.addEventListener("resize",this._refreshHandler),this._refresh());!1===c&&this.container.appendChild(this.canvas);cavy.InteractiveObject.apply(this,[this.canvas])};c.prototype.clear=function(){this.context&&this.clearCanvas(this.context,this.canvas.width,this.canvas.height)};c.prototype.startRender=function(b){this.stopRender();this.tick=b;var a=this;this._firstRender?
this._delayTimer=cavy.Timer.delay(function(){a.rendering=cavy.Timer.repeat(a._loopHandler);a._firstRender=!1}):this.rendering=cavy.Timer.repeat(this._loopHandler)};c.prototype.stopRender=function(){this.rendering?this.rendering.stop():this._delayTImer&&(this._delayTimer.destroy(),this._delayTimer=null);this.rendering=this.tick=null};c.prototype.render=function(b){this.context.save();b.draw(this.context);this.context.restore()};c.prototype.update=function(b){this.tick&&this.tick(b);this.clear();this._render(this.children)};
c.prototype.destroy=function(){this.children=[];this.interactive&&(this.canvas.removeEventListener("touchstart",this._triggerHandler),this.canvas.removeEventListener("touchmove",this._triggerHandler),this.canvas.removeEventListener("touchend",this._triggerHandler),this.canvas.removeEventListener("gesturestart",this._triggerHandler),this.canvas.removeEventListener("gesturechange",this._triggerHandler),this.canvas.removeEventListener("gestureend",this._triggerHandler),this.canvas.removeEventListener("click",
this._triggerHandler));this.clear();this.container.removeChild(this.canvas);this.container=this.context=this.canvas=null};c.prototype._render=function(b){b=b.slice(0);for(var a=0,c=b.length;a<c;a++){var d=b[a];if(d.visible){if(!cavy.outOfRendering){var h=d.getBoundingRect(),g=this.width/2,k=this.height/2;if(h.bottom<-k||h.right<-g||h.top>this.height+k||h.left>this.width+g){d._visible=!1;continue}else d._visible=!0}this.render(d);0===d.children.length||d.cache||this._render(d.children)}}};c.prototype._refresh=
function(){};c.prototype._triggerEvent=function(b){var a=b.touches,c=b.changedTouches,d=a&&a[0]?a[0].pageX:b.pageX,a=a&&a[0]?a[0].pageY:b.pageY;!d&&c&&(d=c[0].pageX);!a&&b.changedTouches&&(a=c[0].pageY);d-=document.body.scrollLeft;a-=document.body.scrollTop;c=this.canvas.getBoundingClientRect();this._trigger(b,d-c.left,a-c.top,this.children);this.hasEvent(b.type)&&this.dispatchEvent(b.type,b)};c.prototype._trigger=function(b,a,c,d){if(d){d=d.slice();for(var h=d.length;h--;){var g=d[h];if(g&&(g.visible&&
(g._visible&&0!==g.children.length)&&this._trigger(b,a,c,g.children),g.visible&&(g._visible&&g.hasEvent(b.type)&&g.hitTest(a,c,this.strictEvent))&&(g.dispatchEvent(b.type,b),!1===b.returnValue)))break}}};cavy.Stage=c})(window);(function(d){d.cavy=d.cavy||{};var c=function(b,a){this.backgroundColor="transparent";this.borderWidth=null;this.borderColor="transparent";this.backgroundRepeat=this.backgroundImage=null;this.queue=[];cavy.InteractiveObject.apply(this,[b,a])};c.prototype=Object.create(cavy.InteractiveObject.prototype);c.DEG_TO_RAD=Math.PI/180;c.prototype.constructor=c;c.prototype.drawPath=function(b,a,c,d){if(this.cache)this.imageCache&&"data:,"!==this.imageCache.src?b.drawImage(this.imageCache,0,0,this.imageCache.width,
this.imageCache.height):b.drawImage(this.cache,0,0,this.cache.width,this.cache.height);else{b.beginPath();d&&b.translate(a.x,a.y);a&&c&&(this.backgroundImage?(c=b.createPattern(this.backgroundImage,this.backgroundRepeat),b.fillStyle=c):b.fillStyle="object"===typeof this.backgroundColor?this.backgroundColor.draw(b,a,c):this.backgroundColor);c=0;for(var h=this.queue.length;c<h;c++){var g=this.queue[c];b[g[0]].apply(b,g[1])}b.lineWidth=this.borderWidth;b.strokeStyle=this.borderColor;b.stroke();b.fill();
b.closePath();d&&b.translate(-a.x,-a.y)}};c.prototype.rect=function(b,a,c,d){this.queue.push(["rect",[b,a,c,d]])};c.prototype.fillRect=function(b,a,c,d){this.queue.push(["fillRect",[b,a,c,d]])};c.prototype.strokeRect=function(b,a,c,d){this.queue.push(["strokeRect",[b,a,c,d]])};c.prototype.clear=function(){this.queue=[]};c.prototype.clearRect=function(b,a,c,d){this.queue.push(["clearRect",[b,a,c,d]])};c.prototype.lineTo=function(b,a){this.queue.push(["lineTo",[b,a]])};c.prototype.arcTo=function(b,
a,c,d,h){this.queue.push(["arcTo",[b,a,c,d,h]])};c.prototype.bezierCurveTo=function(b,a,c,d,h,g){this.queue.push(["bezierCurveTo",[b,a,c,d,h,g]])};c.prototype.moveTo=function(b,a){this.queue.push(["moveTo",[b,a]])};c.prototype.fan=function(b,a,d,f,h){this.moveTo(b,a);this.queue.push(["arc",[b,a,d,(f-90)*c.DEG_TO_RAD,(f-90+h)*c.DEG_TO_RAD,!1]])};c.prototype.arc=function(b,a,d,f,h,g){f*=c.DEG_TO_RAD;h*=c.DEG_TO_RAD;this.queue.push(["arc",[b,a,d,f,h,g]])};cavy.Graphic=c})(window);(function(d){d.cavy=d.cavy||{};d=function(){};d.prototype.constructor=d;d.prototype.draw=function(){return"transparent"};cavy.BackgroundColor=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b){this.y=this.x=0;this.width=c||null;this.height=b||null;this.steps=[]};d.prototype=Object.create(cavy.BackgroundColor.prototype);d.prototype.constructor=d;d.prototype.addStep=function(c,b){this.steps.push([c,b])};d.prototype.draw=function(c){c=c.createLinearGradient(this.x||0,this.y||0,this.width||0,this.height||0);for(var b=this.steps.length,a=0;a<b;a++){var d=this.steps[a];c.addColorStop(d[0],d[1])}return c};cavy.LinearGradient=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b,a,d,f,h){this.x0=c||0;this.y0=b||0;this.x1=c||0;this.y1=b||0;this.r0=a||0;this.r1=h||0;this.steps=[]};d.prototype=Object.create(cavy.BackgroundColor.prototype);d.prototype.constructor=d;d.prototype.addStep=function(c,b){this.steps.push([c,b])};d.prototype.draw=function(c,b,a){c=c.createRadialGradient(this.x0+b.width/2,this.y0+b.height/2,this.r0,this.x1+b.width/2,this.y1+b.height/2,this.r1);b=this.steps.length;for(a=0;a<b;a++){var d=this.steps[a];c.addColorStop(d[0],
d[1])}return c};cavy.CircleGradient=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b,a){cavy.Graphic.apply(this,[{width:c,height:b},a])};d.prototype=Object.create(cavy.Graphic.prototype);d.prototype.constructor=d;d.prototype.draw=function(c,b){if(this.parent||b){var a=this.update(),d=this.matrix;this.updateContext(c);this.drawPath(c,a,d,b)}};cavy.Shape=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b,a){cavy.Graphic.apply(this,[{width:c,height:b},a])};d.prototype=Object.create(cavy.Graphic.prototype);d.prototype.constructor=d;d.prototype.draw=function(c,b){if(this.parent||b){var a=this.update(),d=this.matrix;b||this.updateContext(c);this.rect(0,0,a.innerWidth,a.innerHeight);this.drawPath(c,a,d,b);this.queue=[]}};cavy.Rectangle=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b,a,d,f){this.radius=c||100;this.startAngle=b||0;this.endAngle=a||360;this.anticlockwise=this.anticlockwise||!1;cavy.Graphic.apply(this,[{width:2*c,height:2*c},f])};d.prototype=Object.create(cavy.Graphic.prototype);d.prototype.constructor=d;d.prototype.draw=function(c,b){if(this.parent||b){var a=this.update(),d=this.matrix;b||this.updateContext(c);this.arc(a.sx+this.radius,a.sy+this.radius,this.radius,this.startAngle,this.endAngle,this.anticlockwise);this.drawPath(c,
a,d,b);this.queue=[]}};cavy.Circle=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b){cavy.InteractiveObject.apply(this,[c,b])};d.prototype=Object.create(cavy.InteractiveObject.prototype);d.prototype.constructor=d;d.prototype.draw=function(c){if(this.parent){var b=this.update();this.updateContext(c);this.cache?this.imageCache&&"data:,"!==this.imageCache.src?c.drawImage(this.imageCache,0,0,b.width,b.height):c.drawImage(this.cache,0,0,b.width,b.height):this.source&&(0!==this.source.width&&0!==this.source.height)&&(b.sx+b.innerWidth>this.source.width&&
(b.width=this.source.width,b.innerWidth=this.source.width),b.sy+b.innerHeight>this.source.height&&(b.height=this.source.height,b.innerHeight=this.source.height),c.drawImage(this.source,b.sx,b.sy,b.innerWidth,b.innerHeight,0,0,b.width,b.height))}};cavy.Sprite=d})(window);(function(d){d.cavy=d.cavy||{};d=function(c,b,a){this.pattern=b||[];this.sheet=null;this.interval=this.count=this.frame=0;this.direction="horizontal";this.timer=null;this.line=0;var d=this;this._enterframeHandler=function(){d.enterframe()};cavy.Sprite.apply(this,[c,a])};d.prototype=Object.create(cavy.Sprite.prototype);d.prototype.constructor=d;d.prototype.play=function(){this.timer=cavy.Timer.repeat(this._enterframeHandler,this.interval)};d.prototype.stop=function(){cavy.Timer.stop(this.timer)};d.prototype.enterframe=
function(c){var b=this.pattern[this.sheet];if(b){c=b[0];var a=b[1],d=b[3];this.frame>b[2]&&(d&&(++this.count,this.count===d&&(this.stop(),this.dispatchEvent("complete"))),this.frame=this.line=0);b=0;"horizontal"===this.direction?(c=Math.floor(this.source.width/this.width),b=0===this.line?this.frame:this.frame-this.line*c,b===c?(this.offsetX=0,this.line+=1):this.offsetX=b,this.offsetY=this.line+a):(a=Math.floor(this.source.height/this.height),b=0===this.line?this.frame:this.frame-this.line*a,b===a?
(this.offsetY=0,this.line+=1):this.offsetY=b,this.offsetX=this.line+c);this.frame++}};cavy.SpriteSheet=d})(window);(function(d){d.cavy=d.cavy||{};cavy._textCache=document.createElement("canvas");cavy._textContext=cavy._textCache.getContext("2d");d=function(c,b){this._height=this._width=0;this._fontSize="14px";this._fontFamily="Arial";this._lineHeight="1.5";this._textBaseline="alphabetic";this._shadow=!1;this._shadowBlur=this._shadowY=this._shadowX=0;this._isClear=this._bold=!1;this._textHeight=0;this._textList=[];this._text=String(c);this._textList=this._text.split("\n");this.color="#000";this.textAlign="left";
this.shadowColor="#333";this.outline=!1;this.autoResize=!0;cavy.InteractiveObject.apply(this,[null,b])};d.prototype=Object.create(cavy.InteractiveObject.prototype,{text:{get:function(){return this._text},set:function(c){this._text=String(c);this._textList=this._text.split("\n");this.updateText(!0)}},fontSize:{get:function(){return this._fontSize},set:function(c){this._fontSize=c;this.updateText(!0)}},fontFamily:{get:function(){return this._fontFamily},set:function(c){this._fontFamily=c;this.updateText(!0)}},
textBaseline:{get:function(){return this._textBaseline},set:function(c){this._textBaseline=c;this.updateText(!0)}},lineHeight:{get:function(){return this._lineHeight},set:function(c){this._lineHeight=c;this.updateText(!0)}},bold:{get:function(){return this._bold},set:function(c){this._bold=c;this.updateText(!0)}},width:{get:function(){return this._width},set:function(c){this._width=c;this.updateText(!0)}},height:{get:function(){return this._height},set:function(c){this._height=c;this.updateText(!0)}},
shadow:{get:function(){return this._shadow},set:function(c){this._shadow=c;this.updateText(!0)}},shadowX:{get:function(){return this._shadowX},set:function(c){this._shadowX=c;this.updateText(!0)}},shadowY:{get:function(){return this._shadowY},set:function(c){this._shadowY=c;this.updateText(!0)}},shadowBlur:{get:function(){return this._shadowBlur},set:function(c){this._shadowBlur=c;this.updateText(!0)}}});d.prototype.constructor=d;d.prototype.updateText=function(c){this._textHeight=parseFloat(this._fontSize.replace(/[^0-9]/g,
""));if(this.autoResize){var b=cavy._textContext,a=this.width,d=this.height,f=this._textList.length;this.setStyle(b);for(var h=0;h<f;h++){var g=b.measureText(this._textList[h]).width;a<g&&(a=g)}b=this._textHeight*this.lineHeight;d<b*f&&(d=b*f);this._width=a;this._height=d;this.source={width:a,height:d};c&&(this._isClear=!0)}};d.prototype.draw=function(c){this.text&&this.parent&&(this.cache&&!this._isClear?this._draw(c):this.drawText(c),this._isClear=!1)};d.prototype._draw=function(c){var b=this.update();
this.updateContext(c);this.imageCache&&"data:,"!==this.imageCache.src?c.drawImage(this.imageCache,0,0,b.width,b.height):c.drawImage(this.cache,0,0,b.width,b.height)};d.prototype.drawText=function(c,b){this.update();this.updateContext(c);this.setStyle(c);var a=0,d=this._textList.length,f=this._textHeight*this.lineHeight;switch(this.textAlign){case "center":a=this.width/2;break;case "right":a=this.width}for(;d--;){var h=this._textList[d];this.outline?c.strokeText(h,a,this._textHeight+d*f):c.fillText(h,
a,this._textHeight+d*f)}};d.prototype.setStyle=function(c){c.font=(this.bold?"bold":"")+" "+this._fontSize+" '"+this._fontFamily+"'";c.textAlign=this.textAlign;c.textBaseline=this._textBaseline;this.shadow&&(c.shadowColor=this.shadowColor,c.shadowOffsetX=this._shadowX,c.shadowOffsetY=this._shadowY,c.shadowBlur=this._shadowBlur);this.outline?c.strokeStyle=this.color:c.fillStyle=this.color};cavy.Text=d;cavy.TextObject=d})(window);
